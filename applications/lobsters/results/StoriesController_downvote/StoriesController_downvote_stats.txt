User where <User,SELECT>
TBLREADRECORD  User [2,0,0,3]
TBLWRITERECORD  User [0,0,0] Fields  []
User where( session_token => session[ u] to_s) first <,SELECT>
self lock(true) where( key => key) first <Keystore,SELECT> (c)
self lock(true) where <Keystore,SELECT> (c)
self lock <Keystore,TRANSACTION> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  []
key where <Keystore,SELECT> (c)
kv save! <Keystore,INSERT> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  []
traffic_kv save! <Keystore,INSERT> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  [value,]
date_kv save! <Keystore,INSERT> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  [value,]
Story where <Story,SELECT>
TBLREADRECORD  Story [30,18,0,27]
TBLWRITERECORD  Story [0,1,0] Fields  []
Story where( short_id => params[ story_id]) first <,SELECT>
Vote where <Vote,SELECT>
TBLREADRECORD  Vote [26,18,0,26]
TBLWRITERECORD  Vote [1,0,0] Fields  []
Vote where( user_id => @user id,         story_id => story id,  comment_id => nil) first <,SELECT>
Vote where( user_id => @user id,         story_id => story id,  comment_id => nil) first try <,SELECT>
obj current_vote try <,SELECT>
Vote where <Vote,SELECT>
TBLREADRECORD  Vote [18,14,0,14]
TBLWRITERECORD  Vote [2,1,0] Fields  [vote,]
Vote where( user_id => user_id,  story_id => story_id,       comment_id => comment_id) first_or_initialize <,SELECT>
v destroy! <Vote,DELETE> (c)
TBLWRITERECORD  Vote [1,0,0] Fields  []
v new_record? <Vote,INSERT> (c)
TBLWRITERECORD  Vote [1,0,0] Fields  []
v save! <Vote,INSERT> (c)
TBLWRITERECORD  Vote [3,1,0] Fields  [vote,reason,]
Comment find <Comment,SELECT> (c)
TBLREADRECORD  Comment [12,4,0,5]
TBLWRITERECORD  Comment [3,1,0] Fields  [vote,reason,]
User update_counters <User,UPDATE> (c)
TBLWRITERECORD  User [1,0,14] Fields  []
Comment connection execute <,UPDATE> (c)
self tags select <Tag,SELECT> (c)
TBLREADRECORD  Tag [0,0,0,0]
TBLWRITERECORD  Tag [1,0,15] Fields  [upvotes,downvotes,]
self comments where <Comment,SELECT> (c)
TBLREADRECORD  Comment [2,0,0,0]
TBLWRITERECORD  Comment [1,0,16] Fields  [upvotes,downvotes,]
self comments where("user_id <> ?", self user_id) select <Story,SELECT> (c)
Story find <Story,SELECT> (c)
TBLREADRECORD  Story [0,4,0,1]
TBLWRITERECORD  Story [3,1,0] Fields  [vote,reason,]
User update_counters <User,UPDATE> (c)
TBLWRITERECORD  User [1,0,14] Fields  []
Story connection execute <,UPDATE> (c)

STATS query in total  29
STATS query total on single path: 25
STATS read query on single path: 17
STATS write query on single path: 8
STATS query in view  0
STATS query in closure  19
STATS branch depend on query result  30
STATS branch total  40
STATS read queries  18
STATS read to read query  180
STATS read to write query  126
STATS read to view  0
STATS read to branch  173
STATS materialized query  6
STATS write queries  29
STATS write from user input  5
STATS write from other queries  28
STATS write from const  111
