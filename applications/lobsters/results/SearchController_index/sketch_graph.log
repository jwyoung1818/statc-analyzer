digraph sketch {
	n20 [label=<<i>20__ User(User)   where</i>> color=blue]; 
	n20 -> n21 [label="0"]
	n21 [label=<<i>21__ User where( session_token =) session( u) to_s)   first</i>> color=blue]; 
	n109 [label=<<i>109__ self(ApplicationController)   params</i>> color=crimson]; 
	n142 [label=<<i>142__ self lock(true) where( key =) key)   first</i>> color=blue]; 
	n143 [label=<<i>143__ self lock(true)   where</i>> color=blue]; 
	n144 [label=<<i>144__ self(Keystore)   lock</i>> color=blue]; 
	n151 [label=<<i>151__ key   where</i>> color=blue]; 
	n153 [label=<<i>153__ kv(Keystore)   save!</i>> color=blue]; 
	n184 [label=<<i>184__ traffic_kv(Keystore)   value</i>> color=darkorange]; 
	n184 -> n186 [label="0"]
	n186 [label=<<i>186__ traffic_kv(Keystore)   save!</i>> color=blue]; 
	n188 [label=<<i>188__ date_kv(Keystore)   value</i>> color=darkorange]; 
	n188 -> n190 [label="0"]
	n190 [label=<<i>190__ date_kv(Keystore)   save!</i>> color=blue]; 
	n226 [label=<<i>226__ self(SearchController)   params</i>> color=crimson]; 
	n233 [label=<<i>233__ self(SearchController)   params</i>> color=crimson]; 
	n238 [label=<<i>238__ self(SearchController)   params</i>> color=crimson]; 
	n244 [label=<<i>244__ self(SearchController)   params</i>> color=crimson]; 
	n250 [label=<<i>250__ self(SearchController)   params</i>> color=crimson]; 
	n256 [label=<<i>256__ self(SearchController)   params</i>> color=crimson]; 
	n256 -> n258 [label="1"]
	n258 [label=<<i>258__ @search(Search)   order</i>> color=blue]; 
	n262 [label=<<i>262__ self(SearchController)   params</i>> color=crimson]; 
	n268 [label=<<i>268__ self(SearchController)   params</i>> color=crimson]; 
	n349 [label=<<i>349__ self(Search)   order</i>> color=blue]; 
	n358 [label=<<i>358__ self(Search)   order</i>> color=blue]; 
	n398 [label=<<i>398__ self q to_s split(" ") reject{|w|      if m = w match(/^domain ( +)$/)        domain = m(1)      end    }   join</i>> color=blue]; 
	n398 -> n535 [label="5"]
	n398 -> n652 [label="5"]
	n398 -> n583 [label="8"]
	n398 -> n699 [label="8"]
	n408 [label=<<i>408__ Story(Story)   select</i>> color=blue]; 
	n408 -> n419 [label="0"]
	n419 [label=<<i>419__ Story select( id)   where</i>> color=blue]; 
	n419 -> n535 [label="6"]
	n419 -> n652 [label="6"]
	n419 -> n583 [label="9"]
	n419 -> n699 [label="9"]
	n535 [label=<<i>535__ self results   select</i>> color=blue]; 
	n535 -> n583 [label="3"]
	n583 [label=<<i>583__ self(Vote)   where</i>> color=blue]; 
	n652 [label=<<i>652__ self results   select</i>> color=blue]; 
	n652 -> n699 [label="3"]
	n699 [label=<<i>699__ self(Vote)   where</i>> color=blue]; 
	n963 [label=<<i>963__ (  q,  what,  order ) map{|p| "#{p}=#{CGI escape(self send(p) to_s)}"      }   join</i>> color=blue]; 
}