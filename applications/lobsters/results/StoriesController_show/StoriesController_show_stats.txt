User where <User,SELECT>
TBLREADRECORD  User [2,0,0,3]
TBLWRITERECORD  User [0,0,0] Fields  []
User where( session_token => session[ u] to_s) first <,SELECT>
self lock(true) where( key => key) first <Keystore,SELECT> (c)
self lock(true) where <Keystore,SELECT> (c)
self lock <Keystore,TRANSACTION> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  []
key where <Keystore,SELECT> (c)
kv save! <Keystore,INSERT> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  []
traffic_kv save! <Keystore,INSERT> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  [value,]
date_kv save! <Keystore,INSERT> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  [value,]
Story where <Story,SELECT>
TBLREADRECORD  Story [10,0,0,18]
TBLWRITERECORD  Story [0,1,0] Fields  []
Story where( short_id => params[ id]) first! <,SELECT>
Story select <Story,SELECT>
TBLREADRECORD  Story [8,0,0,11]
TBLWRITERECORD  Story [0,0,0] Fields  []
Story select( id) where <,SELECT>
Comment where <Comment,SELECT>
TBLREADRECORD  Comment [4,0,0,11]
TBLWRITERECORD  Comment [2,0,0] Fields  [story,]
@story merged_comments includes <,SELECT>
self order <Comment,SELECT>
TBLREADRECORD  Comment [0,0,0,8]
TBLWRITERECORD  Comment [1,0,1] Fields  []
Vote where <Vote,SELECT> (c)
TBLREADRECORD  Vote [2,0,0,1]
TBLWRITERECORD  Vote [0,0,0] Fields  [comment,]
Vote where( user_id => @user id,  story_id => @story id,       comment_id => nil) first <,SELECT> (c)
HiddenStory where <HiddenStory,SELECT> (c)
TBLREADRECORD  HiddenStory [2,0,0,0]
TBLWRITERECORD  HiddenStory [0,0,0] Fields  [comment,]
HiddenStory where( user_id => user id,  story_id => self id) first <,SELECT> (c)
Vote where(       user_id => user_id,  story_id => story_id    ) where <,SELECT> (c)
Vote where(       user_id => user_id,  story_id => story_id    ) where <,SELECT> (c)
k values first <,SELECT> (c)
k keys first <,SELECT> (c)
k values first <,SELECT> (c)
k keys first <,SELECT> (c)
k values first <,SELECT> (c)

STATS query in total  27
STATS query total on single path: 25
STATS read query on single path: 21
STATS write query on single path: 4
STATS query in view  0
STATS query in closure  18
STATS branch depend on query result  23
STATS branch total  44
STATS read queries  23
STATS read to read query  46
STATS read to write query  0
STATS read to view  0
STATS read to branch  97
STATS materialized query  3
STATS write queries  27
STATS write from user input  1
STATS write from other queries  12
STATS write from const  24
