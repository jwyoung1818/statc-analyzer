User where <User,SELECT>
TBLREADRECORD  User [2,0,0,3]
TBLWRITERECORD  User [0,0,0] Fields  []
User where( session_token => session[ u] to_s) first <,SELECT>
self lock(true) where( key => key) first <Keystore,SELECT> (c)
self lock(true) where <Keystore,SELECT> (c)
self lock <Keystore,TRANSACTION> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  []
key where <Keystore,SELECT> (c)
kv save! <Keystore,INSERT> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  []
traffic_kv save! <Keystore,INSERT> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  [value,]
date_kv save! <Keystore,INSERT> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  [value,]
Comment where <Comment,SELECT>
TBLREADRECORD  Comment [10,2,98,9]
TBLWRITERECORD  Comment [0,1,0] Fields  []
Comment where( short_id => params[ id]) first <,SELECT>
Vote where <Vote,SELECT>
TBLREADRECORD  Vote [6,2,98,8]
TBLWRITERECORD  Vote [1,0,0] Fields  []
Vote where( user_id => @user id,         story_id => comment story_id,  comment_id => comment id) first <,SELECT>
@user hats where <Hat,SELECT>
TBLREADRECORD  Hat [0,0,0,1]
TBLWRITERECORD  Hat [0,1,0] Fields  []
comment save <Comment,INSERT>
TBLWRITERECORD  Comment [2,2,0] Fields  [hat_id,comment,current_vote,]
self where <Vote,SELECT>
TBLREADRECORD  Vote [0,0,49,0]
TBLWRITERECORD  Vote [2,2,0] Fields  [hat_id,comment,current_vote,]
obj current_vote try <,SELECT> (v)
Vote where <Vote,SELECT> (v)
TBLREADRECORD  Vote [0,0,1,0]
TBLWRITERECORD  Vote [4,2,1] Fields  [current_vote,hat_id,comment,]
r_counts keys sort map{|k|      k == "" ? "+#{r_counts[k]}"   "#{r_counts[k]} #{VoteCOMMENT_REASONS[k]}"    } join <,JOIN> (v)
self moderation try( moderator) try <Comment,SELECT> (v)
self moderation try( moderator) try <Comment,SELECT> (v)
self moderation try( moderator) try <Comment,SELECT> (v)

STATS query in total  22
STATS query total on single path: 22
STATS read query on single path: 17
STATS write query on single path: 5
STATS query in view  6
STATS query in closure  13
STATS branch depend on query result  68
STATS branch total  85
STATS read queries  17
STATS read to read query  30
STATS read to write query  8
STATS read to view  448
STATS read to branch  41
STATS materialized query  3
STATS write queries  22
STATS write from user input  16
STATS write from other queries  29
STATS write from const  14
