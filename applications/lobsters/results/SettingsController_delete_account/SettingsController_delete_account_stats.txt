User where <User,SELECT>
TBLREADRECORD  User [2,0,0,3]
TBLWRITERECORD  User [0,0,0] Fields  []
User where( session_token => session[ u] to_s) first <,SELECT>
self lock(true) where( key => key) first <Keystore,SELECT> (c)
self lock(true) where <Keystore,SELECT> (c)
self lock <Keystore,TRANSACTION> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  []
key where <Keystore,SELECT> (c)
kv save! <Keystore,INSERT> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  []
traffic_kv save! <Keystore,INSERT> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  [value,]
date_kv save! <Keystore,INSERT> (c)
TBLWRITERECORD  Keystore [0,0,1] Fields  [value,]
@user try <User,SELECT>
TBLREADRECORD  User [0,0,0,1]
TBLWRITERECORD  User [0,1,0] Fields  []
self received_messages unread count <User,SELECT> (c)
Keystore put <Keystore,INSERT> (c)
TBLWRITERECORD  Keystore [1,0,3] Fields  [comment_id,moderator_user_id,action,is_moderated,is_deleted,]
recipient where <Message,SELECT> (c)
recipient where <Message,SELECT> (c)
m save <Message,INSERT> (c)
TBLWRITERECORD  Message [8,1,23] Fields  [comment_id,moderator_user_id,action,is_moderated,is_deleted,new_message,cur_url,title,current_vote,]
m save <Moderation,INSERT> (c)
TBLWRITERECORD  Moderation [8,1,23] Fields  [comment_id,moderator_user_id,action,is_moderated,is_deleted,new_message,cur_url,title,current_vote,]
m save <Moderation,INSERT> (c)
TBLWRITERECORD  Moderation [0,0,1] Fields  [is_moderated,is_deleted,]
Story select <Story,SELECT> (c)
TBLREADRECORD  Story [22,0,0,13]
TBLWRITERECORD  Story [0,0,0] Fields  []
Story select( id) where <,SELECT> (c)
Comment where <Comment,SELECT> (c)
TBLREADRECORD  Comment [18,0,0,13]
TBLWRITERECORD  Comment [1,0,1] Fields  [is_moderated,is_deleted,]
self order <Comment,SELECT> (c)
TBLREADRECORD  Comment [0,0,0,8]
TBLWRITERECORD  Comment [1,0,2] Fields  [is_moderated,is_deleted,]
comments count <Comment,SELECT> (c)
TBLREADRECORD  Comment [12,0,0,3]
TBLWRITERECORD  Comment [1,0,2] Fields  [is_moderated,is_deleted,]
self tags select <Tag,SELECT> (c)
TBLREADRECORD  Tag [0,0,0,0]
TBLWRITERECORD  Tag [3,0,1] Fields  [comments_count,is_moderated,is_deleted,]
self comments where <Comment,SELECT> (c)
TBLREADRECORD  Comment [2,0,0,0]
TBLWRITERECORD  Comment [3,0,2] Fields  [comments_count,is_moderated,is_deleted,]
self comments where("user_id <> ?", self user_id) select <Story,SELECT> (c)
m save <,INSERT> (c)
m save <,INSERT> (c)
self save! <User,INSERT> (c)
TBLWRITERECORD  User [0,0,0] Fields  [session_token,deleted_at,]

STATS query in total  28
STATS query total on single path: 28
STATS read query on single path: 17
STATS write query on single path: 11
STATS query in view  0
STATS query in closure  25
STATS branch depend on query result  17
STATS branch total  39
STATS read queries  17
STATS read to read query  76
STATS read to write query  2
STATS read to view  0
STATS read to branch  57
STATS materialized query  3
STATS write queries  28
STATS write from user input  3
STATS write from other queries  29
STATS write from const  69
