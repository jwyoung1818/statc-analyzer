 if f.object.errors.count == 1 && f.object.already_posted_story 

    time_ago_in_words(f.object.already_posted_story.created_at) 
 f.object.already_posted_story.comments_path 
 elsif f.object.errors.any? 
 error_messages_for f.object 
 elsif !f.object.errors.any? && f.object.already_posted_story 

    time_ago_in_words(f.object.already_posted_story.created_at) 
 f.object.already_posted_story.comments_path 
 f.hidden_field :seen_previous 
 end 
 if f.object.url_is_editable_by_user?(@user) 
 f.label :url, "URL:", :class => "required" 
 f.text_field :url, :autocomplete => "off" 
 button_tag "Fetch Title", :id => "story_fetch_title",
      :type => "button" 
 elsif !f.object.new_record? && !f.object.url.blank? 
 f.label :url, "URL:", :class => "required" 
 f.object.url 
 f.object.url 
 end 
 f.label :title, "Title:", :class => "required" 
 f.text_field :title, :maxlength => 100, :autocomplete => "off"  
 f.label :tags_a, "Tags:", :class => "required",
    :style => "line-height: 2.3em;" 
 f.select "tags_a", options_for_select(
    Tag.all_with_filtered_counts_for(@user).map{|t|
      html = "<strong>#{h(t.tag)}</strong> - #{h(t.description.to_s)}"

      if t.hotness_mod != 0
        html << " (hotness mod #{t.hotness_mod > 0 ? "+" : ""}#{t.hotness_mod})"
      end
      if t.filtered_count > 0
        html << " <em>#{t.filtered_count} user" <<
          (t.filtered_count == 1 ? "" : "s") << " filtering</em>"
      end

      [ "#{t.tag} - #{t.description}", t.tag, { "data-html" => raw(html) } ]},
    f.object.tags_a), {}, { :multiple => true } 
 f.label :description, "Text:", :class => "required" 
 f.text_area :description, :rows => 15,
      :placeholder => "Optional when submitting a URL; please see guidelines",
      :autocomplete => "off" 
 show_guidelines?? "" :
    "display: none;" 
 Rails.application.root_url 
 Rails.application.name 
 Rails.application.name 
 f.label :user_is_author, "Author:", :class => "required" 
 f.check_box :user_is_author 
 f.label :user_is_author,
      (f.object.id && f.object.user_id != @user.id ? "Submitter is" : "I am") +
      " the author of the story at this URL (or this text)",
      :class => "normal" 
