 if @direction == :out 
 else 
 end 
 if @direction == :out 
 end 
 if @messages.any? 
 form_tag batch_delete_messages_path do 
 check_box_tag "delete_all",
          :id => "delete_all" 
 @direction == :in ? "From" : "To" 
 @direction == :in ? "Received" : "Sent" 
 @messages.includes(:author, :recipient).each do |message| 
 message.has_been_read? ? "" : "bold" 
 check_box_tag "delete_#{message.short_id}" 
 if @direction == :in 
 message.author.username 

                message.author.username 
 else 
 message.recipient.username 

                message.recipient.username 
 end 
 time_ago_in_words_label(message.created_at) 
 message.short_id 
 message.subject
            
 end 
 submit_tag "Delete Selected" 
 end 
 else 
 @direction == :in ? "" : "sent" 
 end 
 form_for @new_message, :method => :post do |f| 
 error_messages_for @new_message 
 f.label :recipient_username, "To:", :class => "required" 
 f.text_field :recipient_username, :size => 20,
        :autocomplete => "off" 
 f.label :subject, "Subject:", :class => "required" 
 f.text_field :subject, :style => "width: 500px;",
        :autocomplete => "off" 
 f.label :body, "Message:", :class => "required" 
 f.text_area :body, :style => "width: 500px;", :rows => 5,
        :autocomplete => "off" 
 submit_tag "Send Message" 
 end 
