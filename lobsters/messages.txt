%
url: http://localhost:3000/messages
action: GET
controller_function: application_controller.authenticate_user
controller_function_source: https://github.com/jcs/lobsters/blob/master/app/controllers/application_controller.rb#L10
		model_function: User.where
		model_function_source: NA
				DB_query: SELECT  `users`.* FROM `users`  WHERE `users`.`session_token` = '76oFUVyh0iNR6i3L1JgGTSWAXepbvPTI1kVaecPy4jMPTRTFUSQJ7waSezyx'  ORDER BY `users`.`id` ASC LIMIT 1
				DB_table: users
				DB_field: ALL
				DB_operation: SELECT
controller_function: application_controller.increase_traffic_counter  ## transaction
controller_function_source: https://github.com/jcs/lobsters/blob/master/app/controllers/application_controller.rb#L21
		model_function: Keystore.find_or_create_key_for_update
		model_function_source: https://github.com/jcs/lobsters/blob/master/app/models/keystore.rb#L59
				DB_query: BEGIN
									SELECT  `keystores`.* FROM `keystores`  WHERE `keystores`.`key` = 'traffic:date'  ORDER BY `keystores`.`key` ASC LIMIT 1 FOR UPDATE
									SELECT  `keystores`.* FROM `keystores`  WHERE `keystores`.`key` = 'traffic:hits'  ORDER BY `keystores`.`key` ASC LIMIT 1 FOR UPDATE
									UPDATE `keystores` SET `value` = 1443774408 WHERE `keystores`.`key` = 'traffic:date'
									COMMIT
				DB_table: keystores
				DB_field: ALL
				DB_operation: SELECT, UPDATE
controller_function: message_controller.find_message
controller_function_source: https://github.com/jcs/lobsters/blob/master/app/controllers/messages_controller.rb#L135
		model_function: Message.where
		model_function_source: NA
				DB_query: SELECT COUNT(*) FROM `messages`  WHERE `messages`.`recipient_user_id` = 1 AND `messages`.`deleted_by_recipient` = 0
				DB_table: messages
				DB_field: recipient_user_id, deleted_by_recipient
				DB_operation: SELECT

%
url: http://localhost:3000/messages
action: POST
controller_function: application_controller.authenticate_user
controller_function_source: https://github.com/jcs/lobsters/blob/master/app/controllers/application_controller.rb#L10
		model_function: User.where
		model_function_source: NA
				DB_query: SELECT  `users`.* FROM `users`  WHERE `users`.`session_token` = '98G3Kssce4GjikFFPxuSY6iQn07Lo0Ul8TNEImTjBYUHn89Xh6PGcmemgiTM'  ORDER BY `users`.`id` ASC LIMIT 1
				DB_table: users
				DB_field: ALL
				DB_operation: SELECT
controller_function: application_controller.increase_traffic_counter  ## transaction
controller_function_source: https://github.com/jcs/lobsters/blob/master/app/controllers/application_controller.rb#L21
		model_function: Keystore.find_or_create_key_for_update
		model_function_source: https://github.com/jcs/lobsters/blob/master/app/models/keystore.rb#L59
				DB_query: BEGIN
									SELECT  `keystores`.* FROM `keystores`  WHERE `keystores`.`key` = 'traffic:date'  ORDER BY `keystores`.`key` ASC LIMIT 1 FOR UPDATE
									SELECT  `keystores`.* FROM `keystores`  WHERE `keystores`.`key` = 'traffic:hits'  ORDER BY `keystores`.`key` ASC LIMIT 1 FOR UPDATE
									UPDATE `keystores` SET `value` = 1443728598 WHERE `keystores`.`key` = 'traffic:date'
									COMMIT
				DB_table: keystores
				DB_field: ALL
				DB_operation: SELECT, UPDATE
controller_function: message_controller.create
controller_function_source: https://github.com/jcs/lobsters/blob/master/app/controllers/messages_controller.rb#L31
		model_function: Message.new ## transaction
		model_function_source: NA
				DB_query: BEGIN
									SELECT  1 AS one FROM `messages`  WHERE `messages`.`short_id` = 'lkd8il' LIMIT 1
									SELECT  `users`.* FROM `users`  WHERE `users`.`id` = 1 LIMIT 1
									INSERT INTO `messages` (`author_user_id`, `body`, `created_at`, `recipient_user_id`, `short_id`, `subject`) VALUES (1, 'message_content', '2015-10-01 19:43:18', 1, 'lkd8il', 'message_title')
									SELECT COUNT(*) FROM `messages`  WHERE `messages`.`recipient_user_id` = 1 AND `messages`.`has_been_read` = 0 AND `messages`.`deleted_by_recipient` = 0
									INSERT INTO keystores (`key`, `value`) VALUES ('user:1:unread_messages', 2) ON DUPLICATE KEY UPDATE `value` = 2
									COMMIT
				DB_table: users
				DB_field: ALL
				DB_operation: SELECT
				DB_table: messages
				DB_field: ALL
				DB_operation: INSERT, SELECT
				DB_table: users
				DB_field: key, value
				DB_operation: SELECT

