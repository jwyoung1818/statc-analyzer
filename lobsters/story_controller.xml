<controller>
	<method name="create">	
		<input>story_url</input>
		<input>story_title</input>
		<input>story_tags_a</input>
		<input>story_description</input>
		<input>user_is_author</input>
		<call class="story" class_type="model" function_name="new">
			<feed>story_tags_a</feed>
			<feed>story_url</feed>
			<feed>user_id</feed>
		</call>
		<call class="story" class_type="model" function_name="save">
		</call>
	</method>
	<method name="load_user_votes">
		<input>story_id</input>
		<input>user_id</input>
		<query>
			<text>
			SELECT  `votes`.* FROM `votes`  WHERE `votes`.`user_id` = 1 AND `votes`.`story_id` = 4 AND `votes`.`comment_id` IS NULL  ORDER BY `votes`.`id` ASC LIMIT 1
			</text>
			<input>story_id</input>
			<input>user_id</input>
		</query>
		<call class="story" class_type="model" function_name="is_hidden_by_user">	
			<feed>story_id</feed>
			<feed>user_id</feed>
		</call>
	</method>
	<method name="show">
		<input>short_id</input>
		<query line="https://github.com/jcs/lobsters/blob/master/app/controllers/stories_controller.rb#L130">
			<text>
			SELECT  `stories`.* FROM `stories`  WHERE `stories`.`short_id` = 'rm0awm'  ORDER BY `stories`.`id` ASC LIMIT 1
			</text>
			<input>short_id</input>
			<return>merged_story_id</return>
			<return>story_id</return>
			<table>stories</table>
			<operation>SELECT</operation>
		</query>
		<query line="https://github.com/jcs/lobsters/blob/master/app/controllers/stories_controller.rb#L132">
			<text>
			SELECT `stories`.`id` FROM `stories`  WHERE `stories`.`merged_story_id` = 4
			</text>
			<table>stories</table>
			<input>merged_story_id</input>
			<operation>SELECT</operation>	
		</query>
		<query line="https://github.com/jcs/lobsters/blob/master/app/controllers/stories_controller.rb#L145">
			<text>
			SELECT `comments`.* FROM `comments`  WHERE `comments`.`story_id` IN (4)  ORDER BY confidence DESC
			</text>
			<input>merged_story_id</input>
			<table>comments</table>
			<operation>SELECT</operation>
		</query>
		<call class="story" class_type="controller" function_name="load_user_votes">
			<feed>merged_story_id</feed>
			<feed>user_id</feed>
		</call>
	</method>
</controller>
